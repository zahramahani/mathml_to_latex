from mathml_to_latex import clean_html_and_convert_mathml
from IPython.display import Markdown, display

if __name__ == '__main__':

    html_snippet ="""<div><div><span class='az-text'>گزینه ۴‏ پاسخ صحیح است. ابتدا انرژی جنبشی جسم را در حالت دوم با توجه به رابطهٔ مقایسه</span><span>&zwnj;</span><span class='az-text'>ای انرژی جنبشی </span><span class='az-text'>می</span><span>&zwnj;</span><span class='az-text'>یابیم:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>K</mi> <mo>= </mo><mfrac><mrow><mn>١</mn></mrow><mrow><mn>۲</mn></mrow></mfrac> <mrow><msup><mrow><mi>mv</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>⇒</mo><mfrac><mrow><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow></mfrac> <mo>= </mo><mrow><msup><mrow><mo>(</mo><mfrac><mrow><mmultiscripts><mrow><mi>v</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>v</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow></mfrac><mo>)</mo></mrow><mrow><mn>۲</mn> </mrow></msup></mrow> <mrow><munderover><mo>→</mo><mrow><mmultiscripts><mrow><mi>v</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>= </mo><mtext>١۶</mtext> <mfrac><mrow><mi>m</mi></mrow><mrow><mi>s</mi></mrow></mfrac></mrow><mrow><mmultiscripts><mrow><mi>v</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>= </mo><mtext>١۲</mtext> <mfrac><mrow><mi>m</mi></mrow><mrow><mi>s</mi></mrow></mfrac><mpadded width=\"3px\" /><mo>,</mo><mpadded width=\"3px\" /><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>= </mo><mi>۹۰۰</mi> <mi>J</mi></mrow></munderover></mrow></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mfrac><mrow><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mrow><mrow><mi>۹۰۰</mi></mrow></mfrac> <mo>= </mo><mrow><msup><mrow><mo>(</mo><mfrac><mrow><mtext>١۶</mtext></mrow><mrow><mtext>١۲</mtext></mrow></mfrac><mo>)</mo></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>⇒</mo><mfrac><mrow><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mrow><mrow><mi>۹۰۰</mi></mrow></mfrac> <mo>= </mo><mfrac><mrow><mtext>١۶</mtext></mrow><mrow><mn>۹</mn></mrow></mfrac> <mo>⇒</mo><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>= </mo><mtext>١۶۰۰</mtext> <mi>J</mi></mstyle></math></span></div><div><span class='az-text'>حال طبق قضیهٔ کار - انرژی جنبشی، کار برایند نیروهای وارد بر جسم برابر است با:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mmultiscripts><mrow><mi>W</mi></mrow><mrow><mi>t</mi></mrow></mmultiscripts> <mo>= </mo><mi>∆K</mi> <mo>⇒</mo><mmultiscripts><mrow><mi>W</mi></mrow><mrow><mi>t</mi></mrow></mmultiscripts> <mo>= </mo><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>− </mo><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>١</mn> </mrow></mmultiscripts> <mrow><munderover><mo>→</mo><mrow><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>= </mo><mi>۹۰۰</mi> <mi>J</mi></mrow><mrow><mmultiscripts><mrow><mi>K</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>= </mo><mtext>١۶۰۰</mtext> <mi>J</mi></mrow></munderover></mrow><mpadded width=\"3px\" /><mmultiscripts><mrow><mi>W</mi></mrow><mrow><mi>t</mi></mrow></mmultiscripts> <mo>= </mo><mtext>١۶۰۰</mtext> <mo>− </mo><mi>۹۰۰</mi> <mo>= </mo><mi>۷۰۰</mi> <mi>J</mi></mstyle></math></span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۲‏ پاسخ صحیح است. به دلیل یکسان بودن مسیر و حجم &zwnj;آب، توان تولیدی هر دو یکسان است:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mo mathvariant=\"italic\" stretchy=\"true\">{</mo><mtable><mtr><mrow><mmultiscripts><mrow><mi>W</mi></mrow><mrow><mtext> خروجی۱</mtext></mrow></mmultiscripts> <mo>= </mo><mmultiscripts><mrow><mi>W</mi></mrow><mrow><mtext> خروجی۲</mtext></mrow></mmultiscripts></mrow></mtr><mtr><mrow><mmultiscripts><mrow><mi>W</mi></mrow><mrow><mtext>خروجی</mtext></mrow></mmultiscripts> <mo>= </mo><mi>Ra</mi> <mi>×</mi><mmultiscripts><mrow><mi>P</mi></mrow><mrow><mtext>مصرفی</mtext></mrow></mmultiscripts> <mi>×</mi><mi>t</mi></mrow></mtr></mtable> <mo>⇒</mo><mmultiscripts><mrow><mi>Ra</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mi>×</mi><mmultiscripts><mrow><mi>P</mi></mrow><mrow><mtext> مصرفی۱</mtext></mrow></mmultiscripts> <mi>×</mi><mmultiscripts><mrow><mi>t</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>= </mo><mmultiscripts><mrow><mi>Ra</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mi>×</mi><mmultiscripts><mrow><mi>P</mi></mrow><mrow><mtext> مصرفی۲</mtext></mrow></mmultiscripts> <mi>×</mi><mmultiscripts><mrow><mi>t</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"> <mo>⇒</mo><mfrac><mrow><mmultiscripts><mrow><mi>t</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>t</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mrow></mfrac> <mo>= </mo><mfrac><mrow><mmultiscripts><mrow><mi>Ra</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>Ra</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow></mfrac> <mi>×</mi><mfrac><mrow><mmultiscripts><mrow><mi>P</mi></mrow><mrow><mtext> مصرفی۲</mtext></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>P</mi></mrow><mrow><mtext> مصرفی۱</mtext></mrow></mmultiscripts></mrow></mfrac> <mo>= </mo><mfrac><mrow><mn>۲</mn></mrow><mrow><mn>١</mn></mrow></mfrac> <mi>×</mi><mfrac><mrow><mn>١</mn></mrow><mrow><mfrac><mrow><mn>١</mn></mrow><mrow><mn>۲</mn></mrow></mfrac></mrow></mfrac> <mo>= </mo><mn>۴</mn></mstyle></math></span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۲‏ پاسخ صحیح است.</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mtable><mtr><mrow><mmultiscripts><mrow><mi>∆U</mi></mrow><mrow><mi>A</mi></mrow></mmultiscripts> <mo>= </mo><mtext>١۰</mtext> <mi>kg</mi> <mi>×</mi><mtext>١۰</mtext> <mfrac><mrow><mi>m</mi></mrow><mrow><mrow><msup><mrow><mi>s</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow></mfrac> <mi>×</mi><mn>(</mn><mtext>١۰۰</mtext> <mi>m</mi> <mo>−</mo><mi>۲۰</mi> <mi>m</mi><mn>)</mn> <mo>= </mo><mi>۸۰۰۰</mi> <mi>J</mi></mrow></mtr><mtr><mrow><mmultiscripts><mrow><mi>∆U</mi></mrow><mrow><mi>B</mi></mrow></mmultiscripts> <mo>= </mo><mtext>١۵</mtext> <mi>kg</mi> <mi>×</mi><mtext>١۰</mtext> <mfrac><mrow><mi>m</mi></mrow><mrow><mrow><msup><mrow><mi>s</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow></mfrac> <mi>×</mi><mn>(</mn><mi>۳۰</mi> <mi>m</mi> <mo>− </mo><mn>(</mn><mrow><mi>−</mi></mrow><mrow> </mrow> <mi>۹۰</mi> <mi>m</mi><mn>)</mn><mn>)</mn> <mo>= </mo><mtext>١۸۰۰۰</mtext> <mi>J</mi></mrow></mtr></mtable><mo mathvariant=\"italic\" stretchy=\"true\">}</mo><mo>⇒</mo><mfrac><mrow><mmultiscripts><mrow><mi>∆U</mi></mrow><mrow><mi>A</mi></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>∆U</mi></mrow><mrow><mi>B</mi></mrow></mmultiscripts></mrow></mfrac> <mo>= </mo><mfrac><mrow><mn>۴</mn></mrow><mrow><mn>۹</mn></mrow></mfrac></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mtable><mtr><mrow><mmultiscripts><mrow><mi>U</mi></mrow><mrow><mmultiscripts><mrow><mi>f</mi></mrow><mrow><mi>A</mi></mrow></mmultiscripts></mrow></mmultiscripts> <mo>= </mo><mtext>١۰</mtext> <mi>kg</mi> <mi>×</mi><mtext>١۰</mtext> <mfrac><mrow><mi>m</mi></mrow><mrow><mrow><msup><mrow><mi>s</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow></mfrac> <mi>×</mi><mi>۲۰</mi> <mi>m</mi> <mo>= </mo><mi>۲۰۰۰</mi> <mi>J</mi></mrow></mtr><mtr><mrow><mmultiscripts><mrow><mi>U</mi></mrow><mrow><mmultiscripts><mrow><mi>f</mi></mrow><mrow><mi>B</mi></mrow></mmultiscripts></mrow></mmultiscripts> <mo>= </mo><mtext>١۵</mtext> <mi>kg</mi> <mi>×</mi><mtext>١۰</mtext> <mfrac><mrow><mi>m</mi></mrow><mrow><mrow><msup><mrow><mi>s</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow></mfrac> <mi>×</mi><mn>(</mn><mrow><mi>−</mi></mrow><mrow> </mrow> <mi>۹۰</mi> <mi>m</mi><mn>)</mn> <mo>= </mo><mrow><mi>−</mi></mrow><mrow> </mrow> <mtext>١۳۵۰۰</mtext> <mi>J</mi></mrow></mtr></mtable><mo mathvariant=\"italic\" stretchy=\"true\">}</mo><mo>⇒</mo><mfrac><mrow><mmultiscripts><mrow><mi>U</mi></mrow><mrow><mmultiscripts><mrow><mi>f</mi></mrow><mrow><mi>A</mi></mrow></mmultiscripts></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>U</mi></mrow><mrow><mmultiscripts><mrow><mi>f</mi></mrow><mrow><mi>B</mi></mrow></mmultiscripts></mrow></mmultiscripts></mrow></mfrac> <mo>= </mo><mrow><mi>−</mi></mrow><mrow> </mrow> <mfrac><mrow><mn>۴</mn></mrow><mrow><mi>۲۷</mi></mrow></mfrac></mstyle></math></span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۴‏ پاسخ صحیح است.</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>= </mo><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mn>(</mn><mn>١</mn> <mo>− </mo><mi>β∆T</mi><mn>)</mn>  <mrow><munderover><mo>→</mo><mrow> </mrow><mrow><mi>β</mi> <mo>= </mo><mi>۳α</mi></mrow></munderover></mrow><mpadded width=\"3px\" /><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>= </mo><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mn>(</mn><mn>١</mn> <mo>− </mo><mn>۳</mn> <mi>×</mi><mrow><msup><mrow><mtext>١۰</mtext></mrow><mrow><mrow><mi>−</mi></mrow><mrow><mn>۴</mn></mrow></mrow></msup></mrow>  <mi>× </mi><mtext>١۰۰</mtext><mn>)</mn></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"> <mo>⇒ </mo><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>= </mo><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>− </mo><mmultiscripts><mrow><mi>۰⁄۰۳ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>⇒ </mo><mi>∆ρ</mi> <mo>= </mo><mrow><mi>−</mi></mrow><mrow><mmultiscripts><mrow><mi>۰⁄۰۳ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow> <mo>⇒ </mo><mfrac><mrow><mmultiscripts><mrow><mi>∆ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>ρ</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mrow></mfrac> <mi>×</mi><mtext>١۰۰</mtext> <mo>= </mo><mrow><mi>−</mi></mrow><mrow><mn>۳</mn></mrow> <mo>%</mo></mstyle></math></span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۱‏ پاسخ صحیح است.</span></div><div><span class='az-text'>از رابطه</span><span>&zwnj;</span><span class='az-text'>ی انبساط طولی داریم:</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>∆L</mi> <mo>= </mo><mmultiscripts><mrow><mi>αL</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mi>∆T</mi> <mo>= </mo><mi>۲۹</mi> <mi>×</mi><mrow><msup><mrow><mtext>١۰</mtext></mrow><mrow><mrow><mi>−</mi></mrow><mrow><mn>۶</mn></mrow></mrow></msup></mrow> <mi>×</mi><mmultiscripts><mrow><mi>L</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mi>×</mi><mn>١</mn> <mo>= </mo><mi>۲۹</mi> <mi>×</mi><mrow><msup><mrow><mtext>١۰</mtext></mrow><mrow><mrow><mi>−</mi></mrow><mrow><mn>۶</mn></mrow></mrow></msup></mrow> <mmultiscripts><mrow><mi>L</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mstyle></math></span></div><div><span class='az-text'>پس </span><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>۲۹</mi> <mi>×</mi><mrow><msup><mrow><mtext>١۰</mtext></mrow><mrow><mrow><mi>−</mi></mrow><mrow><mn>۶</mn></mrow></mrow></msup></mrow></mstyle></math></span><span class='az-text'> برابر طول اولیه به طول &zwnj;آن اضافه می</span><span>&zwnj;</span><span class='az-text'>شود.</span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۴‏ پاسخ صحیح است. در حرکت نوسانی یک سامانه</span><span>&zwnj;</span><span class='az-text'>ی جرم - فنر رابطه</span><span>&zwnj;</span><span class='az-text'>ی </span><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>ω</mi> <mo>=</mo><msqrt><mfrac><mrow><mi>k</mi></mrow><mrow><mi>m</mi></mrow></mfrac> </msqrt></mstyle></math></span><span class='az-text'> برقرار است، بنابراین </span><span class='az-text'>می</span><span>&zwnj;</span><span class='az-text'>توان جرم وزنه را محاسبه کرد:</span><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>ω</mi> <mo>= </mo><mn>۲</mn> <mi>𝜋f</mi> <mo>= </mo><mn>۲</mn> <mi>𝜋</mi> <mi>×</mi><mfrac><mrow><mn>۵</mn> <msqrt><mn>۲</mn> </msqrt></mrow><mrow><mn>۲</mn> <mi>𝜋</mi></mrow></mfrac> <mo>= </mo><mn>۵</mn> <msqrt><mn>۲</mn> </msqrt> <mfrac><mrow><mi>rad</mi></mrow><mrow><mi>s</mi></mrow></mfrac></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>ω</mi> <mo>= </mo><msqrt><mfrac><mrow><mi>k</mi></mrow><mrow><mi>m</mi></mrow></mfrac> </msqrt> <mo>⇒</mo><mn>۵</mn> <msqrt><mn>۲</mn> </msqrt> <mo>=</mo><msqrt><mfrac><mrow><mi>۵۰</mi></mrow><mrow><mi>m</mi></mrow></mfrac> </msqrt> <mo>⇒</mo><mi>۵۰</mi> <mo>= </mo><mfrac><mrow><mi>۵۰</mi></mrow><mrow><mi>m</mi></mrow></mfrac> <mo>⇒</mo><mi>m</mi> <mo>= </mo><mn>١</mn> <mi>kg</mi></mstyle></math></span></div><div><span class='az-text'>حال می</span><span>&zwnj;</span><span class='az-text'>دانیم در حالت تعادل </span><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mmultiscripts><mrow><mi>F</mi></mrow><mrow><mi>net</mi></mrow></mmultiscripts> <mo>= </mo><mn>۰</mn></mstyle></math></span><span class='az-text'> است، بنابراین:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mmultiscripts><mrow><mi>F</mi></mrow><mrow><mi>net</mi></mrow></mmultiscripts> <mo>= </mo><mn>۰</mn> <mo>⇒</mo><mmultiscripts><mrow><mi>F</mi></mrow><mrow><mi>e</mi></mrow></mmultiscripts> <mo>= </mo><mi>mg</mi> <mo>⇒</mo><mi>kx</mi> <mo>= </mo><mi>mg</mi> <mo>⇒</mo><mi>۵۰</mi> <mi>×</mi><mi>x</mi> <mo>= </mo><mn>١</mn> <mi>×</mi><mtext>١۰</mtext> <mo>⇒</mo><mi>x</mi> <mo>= </mo><mfrac><mrow><mn>١</mn></mrow><mrow><mn>۵</mn></mrow></mfrac> <mi>m</mi> <mo>⇒</mo><mi>۲۰</mi> <mi>cm</mi></mstyle></math></span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))