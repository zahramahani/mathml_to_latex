from mathml_to_latex import clean_html_and_convert_mathml
from IPython.display import Markdown, display

if __name__ == '__main__':
    
    html_snippet ="""<div><div><span class='az-text'>گزینه ۳‏ پاسخ صحیح است.</span></div><div><span class='az-text'>یکی از ویژگی</span><span>&zwnj;</span><span class='az-text'>های تناسب این است که:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mfrac><mrow><mi>a</mi></mrow><mrow><mi>b</mi></mrow></mfrac> <mo>= </mo><mfrac><mrow><mi>c</mi></mrow><mrow><mi>d</mi></mrow></mfrac> <mo>= </mo><mfrac><mrow><mi>e</mi></mrow><mrow><mi>f</mi></mrow></mfrac> <mo>= </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>= </mo><mfrac><mrow><mi>a</mi> <mo>+ </mo><mi>c</mi> <mo>+ </mo><mi>e</mi> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo> </mrow><mrow><mi>b</mi> <mo>+ </mo><mi>d</mi> <mo>+ </mo><mi>f</mi> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo> </mrow></mfrac></mstyle></math></span></div><div><span class='az-text'>بنابراین داریم:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mfrac><mrow><mi>a</mi> <mo>+ </mo><mn>١</mn></mrow><mrow><mn>١</mn></mrow></mfrac> <mo>= </mo><mfrac><mrow><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>+ </mo><mn>۲</mn></mrow><mrow><mn>۲</mn></mrow></mfrac> <mo>= </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>= </mo><mfrac><mrow><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mi>n</mi></mrow></mmultiscripts> <mo>+ </mo><mi>n</mi></mrow><mrow><mi>n</mi></mrow></mfrac> <mo>= </mo><mfrac><mrow><mn>(</mn><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mi>n</mi></mrow></mmultiscripts><mn>)</mn> <mo>+ </mo><mn>(</mn><mn>١</mn> <mo>+ </mo><mn>۲</mn> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mi>n</mi><mn>)</mn></mrow><mrow><mn>١</mn> <mo>+ </mo><mn>۲</mn> <mo>+ </mo><mn>۳</mn> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mi>n</mi></mrow></mfrac></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"> <mo>⇒ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mn>١</mn> <mo>= </mo><mfrac><mrow><mn>(</mn><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mi>n</mi></mrow></mmultiscripts><mn>)</mn> <mo>+ </mo><mfrac><mrow><mi>n</mi> <mn>(</mn><mi>n</mi> <mo>+ </mo><mn>١</mn><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></mfrac></mrow><mrow><mfrac><mrow><mi>n</mi> <mn>(</mn><mi>n</mi> <mo>+ </mo><mn>١</mn><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></mfrac></mrow></mfrac> <mo>⇒ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mn>١</mn> <mo>= </mo><mfrac><mrow><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mi>n</mi></mrow></mmultiscripts></mrow><mrow><mfrac><mrow><mi>n</mi> <mn>(</mn><mi>n</mi> <mo>+ </mo><mn>١</mn><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></mfrac></mrow></mfrac> <mo>+ </mo><mn>١</mn></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"> <mo>⇒ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>= </mo><mfrac><mrow><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mi>n</mi></mrow></mmultiscripts></mrow><mrow><mfrac><mrow><mi>n</mi> <mn>(</mn><mi>n</mi> <mo>+ </mo><mn>١</mn><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></mfrac></mrow></mfrac> <mo>⇒ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts> <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mmultiscripts> <mo>+ </mo> <mo>.</mo> <mo>.</mo> <mo>.</mo>  <mo>+ </mo><mmultiscripts><mrow><mi>a</mi></mrow><mrow><mi>n</mi></mrow></mmultiscripts> <mo>= </mo><mfrac><mrow><mi>n</mi> <mn>(</mn><mi>n</mi> <mo>+ </mo><mn>١</mn><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></mfrac> <mmultiscripts><mrow><mi>a</mi></mrow><mrow><mn>١</mn></mrow></mmultiscripts></mstyle></math></span></div><div><span class='az-text'>البته می</span><span>&zwnj;</span><span class='az-text'>توانستید با مثال عددی (مثلاً سه کسر یا دو کسر) نیز بررسی کنید.</span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۱‏ پاسخ صحیح است.</span></div><div><span class='az-text'>چون هر کدام واسطهٔ هندسی دوتای دیگر است بنابراین:</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mtable><mtr><mrow><mrow><msup><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>= </mo><mi>bc</mi></mrow></mtr><mtr><mrow><mrow><msup><mrow><mi>b</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>= </mo><mi>ac</mi></mrow></mtr><mtr><mrow><mrow><msup><mrow><mi>c</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>= </mo><mi>ab</mi></mrow></mtr></mtable><mo mathvariant=\"italic\" stretchy=\"true\">}</mo>  <mrow><munderover><mo>→</mo><mrow> </mrow><mrow>   <mpadded width=\"3px\" /><mrow><mi>+</mi></mrow><mrow> </mrow><mpadded width=\"3px\" /> </mrow></munderover></mrow>  <mrow><msup><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>+ </mo><mrow><msup><mrow><mi>b</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>+ </mo><mrow><msup><mrow><mi>c</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>= </mo><mi>bc</mi> <mo>+ </mo><mi>ac</mi> <mo>+ </mo><mi>ab</mi></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mrow><munderover><mo>→</mo><mrow> </mrow><mrow>   <mi>×</mi><mn>۲</mn>   </mrow></munderover></mrow>  <mrow><msup><mrow><mi>۲a</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>+ </mo><mrow><msup><mrow><mi>۲b</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>+ </mo><mrow><msup><mrow><mi>۲c</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>− </mo><mi>۲bc</mi> <mo>− </mo><mi>۲ac</mi> <mo>− </mo><mi>۲ab</mi> <mo>= </mo><mn>۰</mn></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"> <mo>⇒ </mo><mrow><msup><mrow><mn>(</mn><mi>a</mi> <mo>− </mo><mi>b</mi><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>+ </mo><mrow><msup><mrow><mn>(</mn><mi>b</mi> <mo>− </mo><mi>c</mi><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>+ </mo><mrow><msup><mrow><mn>(</mn><mi>c</mi> <mo>− </mo><mi>a</mi><mn>)</mn></mrow><mrow><mn>۲</mn></mrow></msup></mrow> <mo>= </mo><mn>۰</mn> <mo>⇒ </mo><mi>a</mi> <mo>= </mo><mi>b</mi> <mo>= </mo><mi>c</mi></mstyle></math></span></div><div><span class='az-text'>بنابراین مثلث، متساوی</span><span>&zwnj;</span><span class='az-text'>الاضلع است.</span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))
    html_snippet ="""<div><div><span class='az-text'>گزینه ۳‏ پاسخ صحیح است. فرض می</span><span>&zwnj;</span><span class='az-text'>کنیم ضلع مربع a‏ باشد.</span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"><mi>A</mi> <mover><mrow><mi>B</mi></mrow><mo>△</mo></mover> <mi>F</mi>  <mrow><mi>~ </mi></mrow><mrow><mi>D</mi></mrow> <mover><mrow><mi>E</mi></mrow><mo>△</mo></mover> <mi>F</mi> <mo>⇒ </mo><mfrac><mrow><mi>h</mi> </mrow><mrow><mi>h</mi> <mn class=\"rz−fontfamily\"> '</mn></mrow></mfrac> <mo>= </mo><mfrac><mrow><mi>DE</mi></mrow><mrow><mi>AB</mi></mrow></mfrac> <mo>= </mo><mfrac><mrow><mn>١</mn></mrow><mrow><mn>۲</mn></mrow></mfrac> <mo>⇒ </mo><mi>h</mi> <mn class=\"rz−fontfamily\"> '</mn> <mo>= </mo><mn>۲</mn> <mi>h</mi> <mn class=\"rz−fontfamily\"> '</mn>  <mrow><munderover><mo>→</mo><mrow> </mrow><mrow><mi>h</mi> <mo>+</mo><mi>h</mi> <mn class=\"rz−fontfamily\"> '</mn> <mo>= </mo><mi>a</mi></mrow></munderover></mrow><mpadded width=\"3px\" /><mi>h</mi> <mo>= </mo><mfrac><mrow><mi>a</mi></mrow><mrow><mn>۳</mn></mrow></mfrac></mstyle></math></span></div><div class='rz-align-left'><span class='az-formula'><math  display=\"inline\" displaystyle=\"true\"><mstyle displaystyle=\"true\" dir=\"ltr\"> <mo>⇒ </mo><mmultiscripts><mrow><mi>S</mi></mrow><mrow><mi>DEF</mi></mrow></mmultiscripts> <mo>= </mo><mfrac><mrow><mn>١</mn></mrow><mrow><mn>۲</mn></mrow></mfrac><mpadded width=\"3px\" /><mi>DE</mi><mo>.</mo><mi>h</mi> <mo>= </mo><mfrac><mrow><mn>١</mn></mrow><mrow><mn>۲</mn></mrow></mfrac> <mo>(</mo><mfrac><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></mfrac><mo>)</mo> <mo>(</mo><mfrac><mrow><mi>a</mi></mrow><mrow><mn>۳</mn></mrow></mfrac><mo>)</mo> <mo>= </mo><mfrac><mrow><mrow><msup><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow><mrow><mtext>١۲</mtext></mrow></mfrac> <mo>⇒ </mo><mfrac><mrow><mmultiscripts><mrow><mi>S</mi></mrow><mrow><mi>ABCD</mi></mrow></mmultiscripts></mrow><mrow><mmultiscripts><mrow><mi>S</mi></mrow><mrow><mi>DEF</mi></mrow></mmultiscripts></mrow></mfrac><mpadded width=\"3px\" /><mo>=</mo><mfrac><mrow><mrow><msup><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow><mrow><mfrac><mrow><mrow><msup><mrow><mi>a</mi></mrow><mrow><mn>۲</mn></mrow></msup></mrow></mrow><mrow><mtext>١۲</mtext></mrow></mfrac></mrow></mfrac> <mo>= </mo><mtext>١۲</mtext></mstyle></math></span></div></div>"""
    print("------------------------------")
    result = clean_html_and_convert_mathml(html_snippet)
    # print(result)
    display(Markdown(result))